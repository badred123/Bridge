{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
	<h1>User: {{ user.username }}</h1>
    {% if user.first_name %}
        <p>{{ user.first_name }}</p>
	{% endif %}
    {% if user.last_name %}
        <p>{{ user.last_name }}</p>
	{% endif %}
    {% if user.phone_number %}
        <p>{{ user.phone_number }}</p>
	{% endif %}
    {% if user.date_of_birth %}
        <p>{{ user.date_of_birth }}</p>
	{% endif %}
    {% if user.gender %}
        <p>{{ user.gender }}</p>
	{% endif %}
	{% if user.about %}
        <p>{{ user.about }}</p>
	{% endif %}
    {% if user == current_user %}
    <p><a href="{{ url_for('editprofile') }}">Edit your profile</a></p>
    {% else %}
    <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#newMessageModal">Message <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></button>

    <div class="modal fade" id="newMessageModal" tabindex="-1" role="dialog" aria-labelledby="newMessageModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="newMessageModalLabel">New message to {{ recipient }}</h4>
                </div>
                <form method="post" role="form">
                    {{ form.hidden_tag() }}
                    {{ wtf.form_errors(form, hiddens="only") }}
                <div class="modal-body">
                    {{ wtf.form_field(form.message) }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    {{ wtf.form_field(form.submit) }}
                </div>
                </form>
            </div>
        </div>
    </div>
    {% endif %}
	<hr>
	{% for post in posts %}
		{% include 'post.html' %}
	{% endfor %}
{% endblock %}
